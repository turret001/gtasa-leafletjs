<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>GTA:SA Map</title>
    <meta name="description" content="An interactive map of San Andreas." />
    <!-- <link rel="stylesheet" href="leaflet/leaflet.css" /> -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> -->
    <!-- <script src="leaflet/leaflet.js"></script> -->
    <style>
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
      #debugger {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 350px;
        height: 200px;
        /* background-color: royalblue; */
        z-index: 9999;
      }
      .center {
        max-width: 300px;
        margin: auto;
        padding: 15px;
        background-color: royalblue;
      }
      .center label {
        color: white;
      }
      .center input {
        width: 70px;
      }
      .center textarea {
        width: 300px;
        height: 100px;
      }
      #text-div {
        margin-left: 10px;
        max-width: 100px;
        text-align: center;
        background-color: royalblue;
        color: white;
      }
    </style>
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div id="map" style="width: 100%; height: 100%; background: #888888"></div>
    <div id="debugger">
      <div id="text-div">epic tool 9000</div>
      <div class="center">
        <label for="areaname">area name:</label>
        <input id="areaname" name="areaname" type="text" autocomplete="off" />
        <label for="areacolor">color:</label>
        <input id="areacolor" name="areacolor" type="color" />
        <textarea id="generated" readonly></textarea>
        <button id="generate" type="button">generate</button>
      </div>
      <!-- {
  id: ,
  positions: [
    
  ],
  name: "",
  color: "",
} -->
    </div>
    <script type="text/javascript">
      //map itself
      var map = L.map("map").setView([0, 0], 1);

      //layer groups

      cartoon = L.tileLayer("cartoonmaptiles/{z}_{x}_{y}.png", {
        noWrap: true,
        maxZoom: 5,
      });
      // cartoon.addTo(map);

      aerial = L.tileLayer("mapfilesnew/{z}_{x}_{y}.png", {
        attribution:
          '<a href="https://github.com/Patrick2562/mtasa-map-images" target="_blank">Map Images by Patrick</a>',
        noWrap: true,
        maxZoom: 5,
      });
      aerial.addTo(map);

      //layer selector
      var baseMaps = {
        Drawing: cartoon,
        Aerial: aerial,
      };

      var markers = [{ id: 0, lat: 57.5, lng: 6, name: "Military Base" }];

      var areas = [
        {
          id: 0,
          positions: [
            [-50.401515322782366, 1.9335937500000002],
            [-53.488045536056205, 2.1972656250000004],
            [-57.421294392094055, 3.3398437500000004],
            [-61.10078883158897, 4.746093750000001],
            [-62.22699603631973, 14.326171875000002],
            [-62.14497603754045, 23.906250000000004],
            [-62.22699603631973, 33.83789062500001],
            [-63.89873081524392, 35.15625000000001],
            [-66.16051056018838, 37.00195312500001],
            [-67.47492238478702, 41.04492187500001],
            [-68.8159271333607, 45.43945312500001],
            [-70.69995129442536, 46.845703125],
            [-71.7739410364347, 49.921875],
            [-72.20867825343294, 58.44726562500001],
            [-72.1279362810559, 83.14453125000001],
            [-71.46912418989676, 89.73632812500001],
            [-71.18775391813159, 95.80078125000001],
            [-70.37785394109224, 100.89843750000001],
            [-69.4421276134176, 108.10546875000001],
            [-66.86108230224609, 109.95117187500001],
            [-62.18601385719424, 111.97265625000001],
            [-57.61010702068388, 112.14843750000001],
            [-35.96022296929668, 111.88476562500001],
            [-33.797408767572485, 108.369140625],
            [-31.87755764334002, 100.10742187500001],
            [-31.503629305773018, 91.318359375],
            [-31.503629305773018, 83.14453125000001],
            [-30.524413269923986, 74.17968750000001],
            [-28.459033019728057, 64.86328125000001],
            [-26.902476886279807, 60.82031250000001],
            [-21.94304553343818, 58.09570312500001],
            [-19.062117883514652, 52.91015625000001],
            [-19.72534224805787, 46.05468750000001],
            [-20.46818922264095, 40.34179687500001],
            [-21.53484700204879, 35.06835937500001],
            [-24.287026865376436, 31.992187500000004],
            [-26.43122806450644, 28.740234375000004],
            [-28.14950321154457, 24.6533203125],
            [-30.29701788337204, 18.720703125000004],
            [-32.99023555965107, 12.875976562500002],
            [-35.38904996691167, 7.338867187500001],
            [-38.61687046392973, 4.350585937500001],
            [-41.54147766679029, 2.6367187500000004],
            [-46.34692761055676, 2.1533203125000004],
          ],
          name: "Los Santos",
          color: "blue",
        },
        {
          id: 1,
          positions: [
            [73.27735320192473, 30.410156250000004],
            [21.12549763660629, 30.410156250000004],
            [21.12549763660629, 112.32421875000001],
            [73.27735320192473, 111.79687500000001],
          ],
          name: "Las Venturas",
          color: "red",
        },
        {
          id: 2,
          positions: [
            [46.31658418182218, -107.05078125000001],
            [39.774769485295465, -111.79687500000001],
            [-32.99023555965107, -110.56640625000001],
            [-35.31736632923786, -104.58984375000001],
            [-31.203404950917385, -97.55859375000001],
            [-33.57801474614399, -87.18750000000001],
            [-40.04443758460857, -79.62890625000001],
            [-44.46515101351963, -75.58593750000001],
            [-42.42345651793833, -66.09375000000001],
            [-27.68352808378776, -50.97656250000001],
            [-24.046463999666567, -43.59375000000001],
            [-2.284550660236957, -38.67187500000001],
            [18.145851771694467, -34.98046875000001],
            [21.779905342529645, -46.23046875],
            [44.465151013519645, -51.50390625000001],
            [51.17934297928929, -62.57812500000001],
            [49.83798245308484, -108.63281250000001],
          ],
          name: "San Fierro",
          color: "yellow",
        },
        {
          id: 3,
          positions: [
            [63.66576033778838, -98.12988281250001],
            [63.25341156651708, -94.833984375],
            [63.194018438087845, -88.7255859375],
            [63.58767529470318, -85.25390625000001],
            [64.33990785750463, -84.81445312500001],
            [64.4348920430406, -82.70507812500001],
            [65.47650756256367, -81.34277343750001],
            [66.7745857647255, -81.16699218750001],
            [67.8424164732793, -84.24316406250001],
            [68.46379955520322, -89.07714843750001],
            [68.43151284537514, -96.7236328125],
            [67.44122869796351, -99.93164062500001],
            [65.4034447883078, -99.66796875000001],
            [63.99523519297698, -98.83300781250001],
          ],
          name: "Bayside",
          color: "yellow",
        },
        {
          id: 4,
          positions: [
            [-55.62799595426722, -75.3662109375],
            [-54.08517342088678, -74.04785156250001],
            [-52.32191088594772, -73.16894531250001],
            [-51.67255514839675, -71.93847656250001],
            [-50.429517947122875, -71.76269531250001],
            [-48.92249926375824, -72.42187500000001],
            [-46.70973594407156, -73.43261718750001],
            [-44.715513732021336, -75.84960937500001],
            [-43.16512263158296, -77.8271484375],
            [-40.145289295676605, -79.80468750000001],
            [-37.54457732085583, -82.83691406250001],
            [-35.38904996691167, -86.79199218750001],
            [-33.32134852669881, -91.71386718750001],
            [-32.175612478499325, -95.00976562500001],
            [-32.32427558887655, -96.767578125],
            [-34.198173096277245, -97.9541015625],
            [-36.3151251474805, -102.52441406250001],
            [-39.673370391765594, -108.23730468750001],
            [-43.197167282501276, -109.11621093750001],
            [-46.25584681848032, -109.6435546875],
            [-49.63917719651035, -109.46777343750001],
            [-53.90433815627469, -108.32519531250001],
            [-55.92458580482952, -107.31445312500001],
            [-57.01681401739112, -108.80859375000001],
            [-58.676937672586924, -107.27050781250001],
            [-59.64554025144323, -104.150390625],
            [-60.65164736580915, -101.20605468750001],
            [-62.08331486294794, -100.4150390625],
            [-63.29293924364835, -98.70117187500001],
            [-62.451405884537564, -94.3505859375],
            [-62.34960927573042, -85.1220703125],
            [-61.669024369272016, -83.01269531250001],
            [-60.08676274626006, -79.80468750000001],
            [-57.49221366670073, -77.255859375],
          ],
          name: "Mount Chiliad",
          color: "yellow",
        },
        {
          id: 5,
          positions: [
            [41.244772343082076, -13.754882812500002],
            [39.095962936305476, -14.633789062500002],
            [36.13787471840729, -12.919921875000002],
            [33.7243396617476, -11.0302734375],
            [33.61461929233378, -6.1962890625],
            [35.0659731379842, -2.7246093750000004],
            [35.02999636902566, 0.26367187500000006],
            [37.64903402157866, 1.8017578125000002],
            [39.26628442213066, 3.6474609375000004],
            [41.178653972331674, 5.361328125],
            [42.16340342422403, 4.438476562500001],
            [42.87596410238256, 1.8017578125000002],
            [43.100982876188546, -1.0546875000000002],
            [42.8115217450979, -4.086914062500001],
            [42.32606244456202, -7.119140625],
            [42.13082130188811, -9.711914062500002],
            [41.73852846935917, -11.821289062500002],
          ],
          name: "Fort Carson",
          color: "red",
        },
        {
          id: 6,
          positions: [
            [8.450638800331001, 83.23242187500001],
            [6.009459238059562, 82.1337890625],
            [3.8642546157214084, 80.85937500000001],
            [0, 80.33203125],
            [-2.460181181020993, 80.72753906250001],
            [-4.039617826768424, 81.43066406250001],
            [-5.353521355337321, 83.18847656250001],
            [-6.446317749457633, 85.1220703125],
            [-6.053161295714067, 87.80273437500001],
            [-4.214943141390639, 89.16503906250001],
            [-3.688855143147035, 91.45019531250001],
            [-2.986927393334863, 92.63671875000001],
            [-2.3723687086440504, 94.921875],
            [-1.1864386394452024, 96.8115234375],
            [3.6888551431470478, 97.16308593750001],
            [5.441022303717974, 96.15234375],
            [6.140554782450308, 94.74609375000001],
            [6.009459238059562, 91.142578125],
            [7.493196470122287, 90.087890625],
            [8.233237111274565, 88.63769531250001],
            [8.146242825034385, 85.34179687500001],
          ],
          name: "Palomino Creek",
          color: "blue",
        },
        {
          id: 7,
          positions: [
            [-65.42172959855269, -86.30859375],
            [-67.40748724648755, -85.95703125000001],
            [-68.97416358340674, -85.0341796875],
            [-69.25614923150721, -82.22167968750001],
            [-69.11561106499448, -77.56347656250001],
            [-68.65655498475736, -75.27832031250001],
            [-67.67608458198099, -75.01464843750001],
            [-67.16995497083366, -72.42187500000001],
            [-66.39036142576474, -71.80664062500001],
            [-65.31182925383723, -74.04785156250001],
            [-64.14895190024562, -76.15722656250001],
            [-63.430860212678105, -78.96972656250001],
            [-63.52897054110279, -82.26562500000001],
            [-64.26368374017731, -84.68261718750001],
          ],
          name: "Angel Pine",
          color: "yellow",
        },
        {
          id: 8,
          positions: [
            [-5.615985819155327, 2.3730468750000004],
            [-7.27529233637217, 0.6152343750000001],
            [-6.795535025719518, -3.9990234375000004],
            [-5.922044619883305, -8.613281250000002],
            [-7.18810087117902, -9.624023437500002],
            [-9.44906182688142, -9.536132812500002],
            [-11.781325296112277, -7.866210937500001],
            [-14.00869637063467, -5.756835937500001],
            [-15.199386048560008, -4.218750000000001],
            [-15.284185114076433, 0.9228515625000001],
            [-13.581920900545844, 2.7246093750000004],
            [-13.581920900545844, 7.382812500000001],
            [-12.811801316582619, 9.975585937500002],
            [-9.925565912405494, 12.7001953125],
            [-7.5803277913301415, 13.842773437500002],
            [-4.8282597468669755, 15.029296875000002],
            [-1.9332268264771106, 14.897460937500002],
            [1.0106897682409128, 14.062500000000002],
            [3.337953961416485, 13.491210937500002],
            [3.469557303061473, 11.997070312500002],
            [2.5479878714713835, 10.415039062500002],
            [2.28455066023697, 8.833007812500002],
            [2.2406396093827334, 6.50390625],
            [0.9228116626857066, 4.614257812500001],
            [-2.284550660236957, 4.042968750000001],
          ],
          name: "Blueberry",
          color: "blue",
        },
        {
          id: 9,
          positions: [
            [14.392118083661728, 45.48339843750001],
            [11.39387923296741, 43.8134765625],
            [8.320212289522944, 43.72558593750001],
            [5.178482088522876, 43.98925781250001],
            [4.039617826768437, 45.87890625],
            [4.171115454867424, 48.25195312500001],
            [5.04717073691972, 51.02050781250001],
            [6.664607562172573, 53.43750000000001],
            [8.971897294083014, 54.62402343750001],
            [11.781325296112277, 55.72265625],
            [13.710035342476681, 57.568359375],
            [15.199386048560008, 56.42578125000001],
            [17.18277905643184, 53.78906250000001],
            [18.60460138845525, 50.88867187500001],
            [16.509832826905846, 47.90039062500001],
          ],
          name: "Montgomery",
          color: "blue",
        },
        {
          id: 10,
          positions: [
            [-16.003575733881313, 21.533203125000004],
            [-23.966175871265044, 21.796875000000004],
            [-24.407137917727653, 24.697265625000004],
            [-23.926013033021192, 27.641601562500004],
            [-24.006326198751115, 31.157226562500004],
            [-22.43134015636061, 32.60742187500001],
            [-18.521283325496277, 32.38769531250001],
            [-17.14079039331665, 31.596679687500004],
            [-15.961329081596647, 28.652343750000004],
            [-15.538375926292048, 24.78515625],
          ],
          name: "Dillimore",
          color: "blue",
        },
        {
          id: 11,
          positions: [
            [70.25945200030641, 6.020507812500001],
            [69.64180371719556, 2.8564453125000004],
            [69.05285807666016, -0.21972656250000003],
            [68.68852060180143, -3.1201171875],
            [67.80924450600011, -3.5156250000000004],
            [66.87834504307976, -0.8789062500000001],
            [66.07154649351564, 3.3398437500000004],
            [66.05371622067925, 7.910156250000001],
            [66.00015035652659, 13.710937500000002],
            [66.73990169639414, 16.962890625000004],
            [68.28565146003619, 17.797851562500004],
            [69.03714171275197, 16.918945312500004],
            [69.85476220252649, 14.501953125000002],
            [70.36309108461556, 11.601562500000002],
          ],
          name: "Abandoned Airport",
          color: "red",
        },
        {
          id: 12,
          positions: [
            [71.93815765811696, -10.327148437500002],
            [71.53882990638355, -11.821289062500002],
            [70.85908719717143, -14.018554687500002],
            [70.25945200030641, -14.194335937500002],
            [69.54987728327795, -11.953125000000002],
            [69.09993967425089, -10.766601562500002],
            [69.00567519658819, -9.360351562500002],
            [69.09993967425089, -7.470703125000001],
            [69.30279408245205, -5.844726562500001],
            [70.21487465331137, -4.7900390625],
            [70.9883492241249, -4.746093750000001],
            [71.63599288330609, -5.449218750000001],
            [72.18180355624855, -7.514648437500001],
            [72.26231002404462, -9.404296875000002],
          ],
          name: "Town",
          color: "#000000",
        },
        {
          id: 13,
          positions: [
            [70.48089578887483, -61.30371093750001],
            [69.68761843185617, -59.98535156250001],
            [68.60852084639889, -59.45800781250001],
            [67.82583637985663, -58.22753906250001],
            [67.89208614070753, -55.45898437500001],
            [68.52823492039879, -52.20703125000001],
            [69.31832006949072, -50.80078125],
            [70.05059634999759, -50.8447265625],
            [70.59802116106809, -52.11914062500001],
            [71.05979781529196, -54.36035156250001],
            [71.05979781529196, -57.78808593750001],
            [70.9883492241249, -60.55664062500001],
          ],
          name: "Town",
          color: "#9bc016",
        },
      ];

      //take areas from areas array and display them on map
      for (var a = 0; a < areas.length; a++) {
        var polygon = L.polygon(areas[a].positions, {
          color: areas[a].color,
          fillColor: areas[a].color,
          fillOpacity: 0.1,
        }).addTo(map);
        polygon.bindPopup(areas[a].name);
      }

      //take markers from markers array and add them to the map
      for (var i = 0; i < markers.length; i++) {
        var marker = L.marker([markers[i].lat, markers[i].lng]).addTo(map);
        marker.bindPopup(markers[i].name);
      }

      L.control.layers(baseMaps).addTo(map);
    </script>

    <!-- debugger -->
    <script type="text/javascript">
      var postemp = [];

      var point = L.icon({
        iconUrl: "dot.png",
        iconSize: [10, 10],
      });

      // make a list of all positions
      map.on("click", function (ev) {
        var latlng = map.mouseEventToLatLng(ev.originalEvent);
        // postemp.push("[" + latlng.lat + ", " + latlng.lng + "]")
        postemp.push([latlng.lat, latlng.lng]);
        console.log(postemp);
        var tempmark = L.marker([latlng.lat, latlng.lng], {
          icon: point,
        }).addTo(map);
      });

      function generatePaste(pos) {
        var ready = document.getElementById("generated");
        var areaName = document.getElementById("areaname").value;
        var areaColor = document.getElementById("areacolor").value;
        var area = {
          id: areas.length,
          positions: pos,
          name: areaName,
          color: areaColor,
        };
        //paste area into generated
        ready.value = JSON.stringify(area);
      }
      //run generatePaste when generate button is clicked
      document
        .getElementById("generate")
        .addEventListener("click", function () {
          var pos = postemp;
          generatePaste(pos);
        });
    </script>
  </body>
</html>
